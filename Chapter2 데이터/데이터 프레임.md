# 데이터 프레임(data frame) 이해
데이터 프레임은 데이터를 다룰 때 가장 많이 사용하는 데이터 형태. 행과 열로 구성된 사각형 모양의 표처럼 생김.
## 열
세로로 나열된 열은 속성을 나타냄. 열은 컬럼(column) 또는 변수(variable)라고 함.
데이터에 100가지 속성의 정보가 들어 있다면, 100개의 컬럼 또는 100개의 변수를 가지고 있다고 표현

## 행
가로로 나열되는 행은 단위의 정보를 나타냄. 행은 로(row)또는 케이스(case)라고 불림.
데이터에 30명의 정보가 들어 있다면, 그 데이터는 30개의 로 또는 30개의 케이스를 가지고 있다고 표현
한 사람의 데이터는 하나의 행으로 구성

> 데이터가 크다는 말은 행이 많다는 의미일 수도 있고, 열이 많다는 의미일 수도 있음. 열이 더 많은 것이 중요.  
> 행이 많으면 컴퓨터가 느려짐. 열이 많아지면 변수를 조합할 수 있는 경우의 수가 늘어남. 변수가 늘어나면 단순한 분석 방법으로는 해결하기 힘드므로 여러 변수의 영향을 동시에 고려하는 복잡한 분석 방법을 활용할 필요성이 생김. 최근 머신러닝이 주목받는 이유. 변수가 많아지면 적용할 분석 기술이 달라지기 때문에 분석가는 전보다 더 노력을 기울여야 함. 데이터 분석에서는 데이터의 양을 의미하는 행보다 데이터의 다양성을 의미하는 열이 많은 것이 더 중요.

# 데이터 프레임 생성
## 데이터 입력으로 데이터 프레임 생성
### pandas 패키지 로드
pandas 패키지를 로드. pandas는 데이터를 가공할 때 사용하는 패키지.
```
import pandas as pd
```
### 데이터 프레임 함수
데이터 프레임을 만들 때는 pandas의 DataFrame()을 이용. DataFrame()에서 D와 F는 대문자로 입력 주의.  
DataFrame()에 중괄호({})를 입력한 다음 변수명, 콜론(:), 변수에 넣을 값을 차례로 입력. 변수명은 따옴표를 이용해 문자 형태로 입력, 변수에 넣을 값은 []안에 입력.
```
df = pd.DataFrame({'name'    : ['김지훈', '이유진', '박동현', '김민지'],
                   'english' : [90, 80, 60, 70],
                   'math'    : [50, 60, 100, 20]})
```
> 데이터 프레임의 이름을 정할 때 'Data Frame'의 약자인 df를 이용하면 다른 변수들과 구별하기 쉬움.  
> 코드가 길어지면 쉼표(,) 뒤에서 enter를 눌러 다음 줄로 넘기면 코드의 전체 구조가 한눈에 들어와서 코드를 이해하기 쉽고 오류를 찾기 편해짐.
> 데이터 프레임 왼쪽에 표시된 숫자는 각 행이 몇 번째 순서에 위치하는지 나타낸 인덱스(index). 인덱스 번호는 0부터 시작함.

### 데이터 프레임으로 분석
데이터 프레임을 완성했으니 데이터를 분석.
#### 특정 변수의 값 추출
데이터 프레임 이름 뒤에 []를 입력한 다음 문자 형태로 변수명을 입력.
```
df['english']
```
#### 변수의 값으로 합계 구하기
df에서 영어 점수를 추출하는 코드를 sum()에 입력하면 영어 점수 합계 출력.
```
sum(df['english'])
```
#### 변수의 값으로 평균 구하기
영어 점수와 수학 점수의 평균 구하기. 합계를 학생 수로 나누면 됨.
```
sum(df['english']) / 4  # 영어 점수 평균
```
# 외부 데이터 이용
데이터를 분석할 때는 직접 데이터를 입력하기 보다 외부에서 생성된 데이터를 불러와 분석하는 경우가 더 많음. 데이터를 관리할 때 가장 많이 사용하는 엑셀 파일과 CSV 파일을 불러와서 실습해보기
## 엑셀 파일 불러오기
1. 예시 엑셀 파일. 첫 번째 행을 보면 5개의 변수가 있음. 변수는 학생의  id(번호), nclass(반), 그리고 math(수학), english(영어), science(과학) 3과목의 시험 점수를 담음. 20명의 정보를 담은 데이터임.
2. 워킹 디렉터리에 엑셀 파일 삽입.  
현재 사용하고 있는 워킹 디렉터리에 불러올 파일을 삽입. excel_exam.xlsx 파일을 워킹 디렉터리에 넣기.
3. 엑셀 파일 불러오기.
pandas의 read_excel()을 이용해 엑셀 파일을 불러옴. read_excel()은 엑셀 파일을 데이터 프레임으로 만드는 기능을 함. 괄호 안에 불러올 엑셀 파일명을 입력하면 됨. 파일명을 입력할 때 확장자(.xlsx)까지 입력. 파일명 앞뒤에 따옴표(')를 붙여야 함. 파일명을 입력할 때 항상 앞뒤에 따옴표를 넣어야 하니 주의.
```
df_exam = pd.read_excel('excel_exam.xlsx')  # 엑셀 파일을 불러와 df_exam에 할당
df_exam                                     # 출력
```
워킹 디렉터리가 아닌 다른 폴더에 있는 엑셀 파일을 불러올 때는 슬래시(/)를 이용해 파일 경로를 입력
```
df_exam = pd.read_excel('c:/easy_python/excel_exam.xlsx')
```
4. 분석
영어 점수와 과학 점수의 전체 평균.
```
sum(df_exam['english']) / 20
sum(df_exam['science']) / 20
```
앞에서 평균을 구할 때 sum()으로 점수 합계를 구한 다음 학생 수를 직접 입력해 나눔. 값의 개수를 구하는 len()을 이용하면 학생 수를 직접 입력하지 않고도 평균을 구할 수 있음.  
len()은 값의 개수를 구하는 기능을 함. len()에 변수를 입력하면 변수에 들어 있는 값의 개수 출력, 데이터 프레임을 입력하면 행의 개수 출력.
```
# 변수의 값 개수 구하기
x = [1, 2, 3, 4, 5]
len(x)
# 데이터 프레임의 행 개수 구하기
df = pd.DataFrame({'a': [1, 2, 3], 'b': [4, 5, 6]})
len(df)
```
len()을 활용해 평균 점수 구하기. 학생 수를 입력하는 대신 len(df_exam) 입력.
```
len(df_exam)                            # df_exam의 행 개수 구하기
sum(df_exam['english']) / len(df_exam)  # english 합계를 행 개수로 나누기
sum(df_exam['science']) / len(df_exam)  # science 합계를 행 개수로 나누기
```
* 엑셀 파일의 첫 번째 행이 변수명이 아닐 때
read_excel()에 header = None을 입력하면 첫 번째 행을 변수명이 아닌 데이터로 인식해 불러옴.
```
df_exam_novar = pd.read_excel('excel_exam_novar.xlsx', header = None)
df_exam_novar
```
## CSV 파일 불러오기
CSV 파일은 엑셀뿐 아니라 R, SAS, SPSS 등 데이터를 다루는 대부분의 프로그램에서 읽고 쓸 수 있는 범용 데이터 파일. 확장자명에서도 알 수 있듯이 CSV(comma-separated values) 파일은 값이 쉼표로 구분된 형태. 다양한 프로그램에서 지원하고 엑셀 파일보다 용량이 작아서 데이터를 주고 받을 때는 CSV 파일을 자주 이용. CSV 파일을 불러와 데이터 프레임을 만드는 방법 익혀보기.
1. 워킹 디렉터리에 CSV 파일 삽입하기
실습할 csv 파일을 워킹 디렉터리에 삽입
2. CSV 파일 불러오기
pandas의 read_csv()를 이용하면 CSV 파일을 불러올 수 있음. 괄호 안에 불러올 파일명을 입력
```
df_csv_exam = pd.read_csv('exam.csv')
df_csv_exam
```
## CSV 파일로 저장하기
데이터 프레임을 CSV 파일로 저장하면 파이썬 외에도 데이터를 다루는 대다수의 프로그램에서 불러올 수 있음.
1. 데이터 프레임 만들기
```
df_midterm = pd.DataFrame({'english': [90, 80, 60, 70],
                           'math'   : [50, 60, 100, 20],
                           'nclass' : [1, 1, 2, 2]})
df_midterm
```
2. CSV 파일로 저장하기
데이터 프레임 이름 뒤에 점을 찍고 to_csv()를 입력한 다음 괄호 안에 파일명을 입력. 저장한 파일은 워킹 디렉터리에 만들어짐
```
df_midterm.to_csv('output_newdata.csv')
```
output_newdata.csv를 엑셀에서 열어보면 첫 번째 열에 인덱스 번호가 들어있음. 인덱스 번호를 제외하고 저장하려면 to_csv()에 index = False를 입력.
```
df_midterm.to_csv('output_newdata.csv', index = False)
```
파이썬에는 True와 False로 구성되는 불리언(boolean)이라는 데이터 타입. 불리언은 어떤 값이 참인지 거짓인지 나타냄, 여기서는 index = False 의 False가 거짓을 의미.
'인덱스 번호를 저장할 것인가?'라는 질문에 '아니다'라는 답을 한 셈. True와 False의 첫 글자는 반드시 대문자로 입력해야 함.
